<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SmartCitizen API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="summary">Summary</h1>

<blockquote>
<h3 id="api-endpoint">API Endpoint</h3>

<p>https://new-api.smartcitizen.me</p>

<h3 id="summary-of-resources">Summary of Resources</h3>

<ul>
<li>/v0/oauth</li>
<li>/v0/me</li>
<li>/v0/users/:id</li>
<li>/v0/devices/:id</li>
<li>/v0/kits/:id</li>
<li>/v0/sensors/:id</li>
</ul>

<h3 id="updates-and-changes">Updates and Changes</h3>
</blockquote>

<p>The Smartcitizen V0 API is a publicly available interface allowing developers access to the smartcitizen dataset. The interface is stable and currently used by the Strava mobile applications. However, changes are occasionally made to improve performance and enhance features. See the changelog for more details.</p>

<h1 id="access">Access</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre><code class="highlight shell"><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">meowmeowmeow</code> with your API key.</p>
</blockquote>

<p>Kittn uses API keys to allow access to the API. You can register a new Kittn API key at our <a href="https://new-api.smartcitizen.me/developers">developer portal</a>.</p>

<p>Kittn expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: meowmeowmeow</code></p>

<aside class="notice">
You must replace `meowmeowmeow` with your personal API key.
</aside>

<!-- # Rate Limiting -->

<h1 id="pagination">Pagination</h1>

<p>Most index responses</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>integer</td>
<td>1</td>
<td>page</td>
</tr>
<tr>
<td>per_page</td>
<td>integer</td>
<td>25</td>
<td>page</td>
</tr>
</tbody></table>

<h1 id="filtering">Filtering</h1>

<h2 id="global-search">Global Search</h2>

<p>Searching Users and Devices</p>

<h3 id="required-parameters">Required Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td>string</td>
<td>Query string</td>
</tr>
</tbody></table>

<h2 id="filtering-responses">Filtering Responses</h2>

<h4 id="examples">Examples</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>q[first_name_eq]</td>
<td>string</td>
<td>First name equals</td>
</tr>
<tr>
<td>q[owner_id]</td>
<td>string</td>
<td>Owner ID equals</td>
</tr>
</tbody></table>

<h2 id="sorting-responses">Sorting Responses</h2>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>q[sort]</td>
<td>string</td>
<td>page</td>
</tr>
</tbody></table>

<h1 id="devices">Devices</h1>

<h2 id="update-a-device">Update a Device</h2>

<p>This updates a device</p>

<h3 id="optional-parameters">Optional Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Name of the device</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Description of the device</td>
</tr>
<tr>
<td>mac_address</td>
<td>mac_address</td>
<td>MAC Address of the device</td>
</tr>
<tr>
<td>latitude</td>
<td>decimal</td>
<td>Latitude of the device</td>
</tr>
<tr>
<td>longitude</td>
<td>decimal</td>
<td>Longitude of the device</td>
</tr>
</tbody></table>

<h2 id="get-all-devices">Get All Devices</h2>

<blockquote>
<h3 id="definition">Definition</h3>

<p>GET https://new-api.smartcitizen.me/v0/devices</p>
</blockquote>
<pre><code class="highlight plaintext">$ curl -G https://new-api.smartcitizen.me/v0/devices
</code></pre>

<h1 id="users">Users</h1>

<h2 id="get-current-user">Get Current User</h2>

<blockquote>
<h3 id="definition">Definition</h3>

<p><code class="prettyprint">GET https://new-api.smartcitizen.me/v0/me</code></p>

<h3 id="example-request">Example Request</h3>
</blockquote>
<pre><code class="highlight plaintext">$ curl -G https://new-api.smartcitizen.me/v0/me \
    -H "Authorization: Bearer 94abeabdec09f6670863766f792ead24d61fe3f9"
</code></pre>

<p>This request is used to retrieve information about the currently authenticated user.
Returns a detailed representation of the user.</p>

<h2 id="update-current-user">Update Current User</h2>

<blockquote>
<h3 id="definition">Definition</h3>

<p><code class="prettyprint">GET https://new-api.smartcitizen.me/v0/me</code></p>

<h3 id="example-request">Example Request</h3>
</blockquote>
<pre><code class="highlight plaintext">$ curl -G https://new-api.smartcitizen.me/v0/me \
    -H "Authorization: Bearer 94abeabdec09f6670863766f792ead24d61fe3f9"
</code></pre>

<p>This request is used to retrieve information about the currently authenticated user.
Returns a detailed representation of the user.</p>

<h3 id="optional-parameters">Optional Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td></td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td></td>
<td>Last name of the user</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Email address of the user</td>
</tr>
<tr>
<td>username</td>
<td></td>
<td>Username of the user</td>
</tr>
<tr>
<td>password</td>
<td></td>
<td>Password of the user</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>City where the user is</td>
</tr>
<tr>
<td>country_code</td>
<td></td>
<td><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">2 letter</a> country-code of the user</td>
</tr>
<tr>
<td>url</td>
<td></td>
<td>Webpage of the user</td>
</tr>
<tr>
<td>avatar</td>
<td></td>
<td>URL to the avatar of the user</td>
</tr>
</tbody></table>

<h2 id="get-all-users">Get All Users</h2>
<pre><code class="highlight shell">curl <span class="s2">"https://new-api.smartcitizen.me/v0/users"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fluffums"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"calico"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Isis"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves all users.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://new-api.smartcitizen.me/users</code></p>

<h3 id="optional-parameters">Optional Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>1</td>
<td>If set to true, the result will also include cats.</td>
</tr>
<tr>
<td>per_page</td>
<td>25</td>
<td>If set to false, the result will include users that have already been adopted.</td>
</tr>
</tbody></table>

<h2 id="get-a-specific-user">Get a Specific User</h2>
<pre><code class="highlight shell">curl <span class="s2">"https://new-api.smartcitizen.me/v0/users/3"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Isis"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves a specific user.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://new-api.smartcitizen.me/users/&lt;ID|username&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID or username</td>
<td>The ID or username of the user to retrieve</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slown down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

<p>200: Request succeeded for a GET call, for a DELETE or PATCH call that completed synchronously, or for a PUT call that synchronously updated an existing resource</p>

<p>201: Request succeeded for a POST call that completed synchronously, or for a PUT call that synchronously created a new resource</p>

<p>202: Request accepted for a POST, PUT, DELETE, or PATCH call that will be processed asynchronously</p>

<p>206: Request succeeded on GET, but only a partial response returned: see above on ranges</p>

<p>Pay attention to the use of authentication and authorization error codes:</p>

<p>401 Unauthorized: Request failed because user is not authenticated
403 Forbidden: Request failed because user does not have authorization to access a specific resource</p>

<p>Return suitable codes to provide additional information when there are errors:</p>

<p>422 Unprocessable Entity: Your request was understood, but contained invalid parameters
429 Too Many Requests: You have been rate-limited, retry later
500 Internal Server Error: Something went wrong on the server, check status site and/or report the issue</p>

<p>Always provide the full resource on 200 and 201 responses</p>

<p>202 responses will not include the full resource representation, e.g.:</p>

<p>Generate structured errors
{
  &ldquo;id&rdquo;:      &ldquo;rate_limit&rdquo;,
  &ldquo;message&rdquo;: &ldquo;Account reached its API rate limit.&rdquo;,
  &ldquo;url&rdquo;:     &ldquo;https://docs.service.com/rate-limits&rdquo;
}</p>

<p>Show rate limit status</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
