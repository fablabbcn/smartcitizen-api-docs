# Users

## Add a User
<%= `ruby ~/Desktop/docs.rb users POST` %>

Most actions on the API require authenticated access. To obtain an [OAuth 2.0](#oauth-2.0) `access_token` the first step is to have a user account.

Parameter | Required? | Description
--------- | ------- | -----------
**first_name**<br/>*string* | | First name of the user
**last_name**<br/>*string* | | Last name of the user
**email**<br/>*string* | ✓ | Email address of the user
**username**<br/>*string* | ✓ | Username of the user
**password**<br/>*string* | ✓ | Password of the user
**city**<br/>*string* | | City where the user is located
**country_code**<br/>*string* | | [2 letter](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) country-code of the user
**url**<br/>*string* | | Webpage of the user
**avatar**<br/>*string* | | URL to the avatar of the user

## Get Current User

<%= `ruby ~/Desktop/docs.rb me` %>

Used to retrieve information about the currently authenticated user.
Returns a detailed representation of the user.

Parameter | Description
--------- | -----------
**id**<br/>*integer* | Unique ID for the user
**first_name**<br/>*string* | First name of the user
**last_name**<br/>*string* | Last name of the user
**email**<br/>*string* | Email address of the user
**username**<br/>*string* | Username of the user
**location.city**<br/>*string* | City where the user is located
**location.country_code**<br/>*string* | [2 letter](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) country-code of the user
**location.country**<br/>*string* | Automatically generated from country_code
**url**<br/>*string* | Webpage of the user
**avatar**<br/>*string* | URL to the avatar of the user
**joined_at**<br/>*datetime* | The date and time that the user joined the platform
**devices**<br/>*array* | Array of [devices](#devices) that the user manages on the platform

## Update Current User
<%= `ruby ~/Desktop/docs.rb me PATCH` %>

An authenticated user can update their own details. Same parameters used as [adding a user](#add-a-user)

## Reset a Password
<%= `ruby ~/Desktop/docs.rb password_resets?username=testing POST` %>

1. `POST https://new-api.smartcitizen.me/v0/password_resets?username=USERNAME`
2. Email is sent to `User(username=USERNAME)` containing `PASSWORD_RESET_TOKEN`
3. `GET https://new-api.smartcitizen.me/v0/password_resets/PASSWORD_RESET_TOKEN` returns `User(username=USERNAME)` object
4. `PATCH https://new-api.smartcitizen.me/v0/password_resets/PASSWORD_RESET_TOKEN?password=NEW_PASSWORD`

## Get All Users
<%= `ruby ~/Desktop/docs.rb users` %>

This endpoint retrieves all users.

### HTTP Request
<%= url 'users' %>

## Get a User
<%= `ruby ~/Desktop/docs.rb users/2` %>

This endpoint retrieves a specific user.

### HTTP Request
<%= url 'users/<id|username>' %>

### URL Parameters

Parameter | Description
--------- | -----------
ID or username | The ID or username of the user to retrieve
