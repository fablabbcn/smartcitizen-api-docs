<%
  # This code was moved here from layout.erb, because this file is loaded first
  # The `url` method needs to be defined before it is used.
  BASE_URL = 'https://api.smartcitizen.me/v0'
  def url path = nil, method = 'GET'
    "`#{method} #{[BASE_URL, path].compact.join('/')}`"
  end
%>

# Summary

The Smartcitizen V0 API is a publicly available interface allowing anyone to develop applications and experiments on top of the Smartcitizen platform. For more general and hardware information check the [documentation](http://docs.smartcitizen.me/).

```shell
# Shell example
# In the shell examples we use either curl or the `http` (HTTPIe) program
```

```javascript
// Javascript example
```

```json
# The json responses will look something like this:
[
  {
    "example_response":"example_value"
  }
]
```

![SmartCitizen UML](https://i.imgur.com/PV4YkRD.png)

## Schema

All API access is over HTTPS (with the exception of `/add`) and accessed via `api.smartcitizen.me`

Blank fields are included as `null` instead of being omitted.

All timestamps are returned in ISO 8601 format:

`YYYY-MM-DDTHH:MM:SSZ`

## Root Endpoint

You can issue a GET request to the root endpoint to get all the endpoint categories that the API supports:

`$ curl https://api.smartcitizen.me`

```shell
http GET https://api.smartcitizen.me/v0/
```

```javascript
// Run this in your browser console
fetch('https://api.smartcitizen.me/v0/')
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    console.log(JSON.stringify(myJson));
  });
```

```json
HTTP/1.1 200 OK
{
  "current_user_url": "https://api.smartcitizen.me/v0/me",
  "components_url": "https://api.smartcitizen.me/v0/components",
  "devices_url": "https://api.smartcitizen.me/v0/devices",
  "kits_url": "https://api.smartcitizen.me/v0/kits",
  "measurements_url": "https://api.smartcitizen.me/v0/measurements",
  "sensors_url": "https://api.smartcitizen.me/v0/sensors",
  "users_url": "https://api.smartcitizen.me/v0/users"
}
```



## JSON-P Callbacks

You can send a `?callback` parameter to any GET call to have the results wrapped in a JSON function.

## Postman

We recommend that you try our API using [Postman](https://www.getpostman.com/), we have created a shared collection that you can import from here [https://www.getpostman.com/collections/85a92402907e3cb07759](https://www.getpostman.com/collections/85a92402907e3cb07759)

## Versioning

By default, all requests receive the v0 version of the API. We encourage you to explicitly request this version via the URL or the HTTP Accept header.

 | endpoint
---- | ------------------------------------
**BAD** | https://api.smartcitizen.me/users
**GOOD** | https://api.smartcitizen.me/v0/users

`Accept: application/vnd.smartcitizen; version=0,application/json`
